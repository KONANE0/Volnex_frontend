<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VOLNEX - العب الآن</title>
  <link rel="stylesheet" href="style.css" />

  <script type="module">
    // استخراج بيانات المستخدم من الرابط
    const urlParams = new URLSearchParams(window.location.search);
    const uid = urlParams.get("uid");
    const username = urlParams.get("username") || "مستخدم تليجرام";
    const photo = urlParams.get("photo") || "https://t.me/i/userpic/320/placeholder.jpg";

    // تسجيل المستخدم أو تحديث دخوله
    fetch("https://volnex-backend--huissh04.repl.co/saveUser", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ uid, username, photo }),
    })
    .then(res => res.json())
    .then(() => {
      // تمرير البيانات لـ play.js
      window.userId = uid;
      window.username = username;
      window.photo = photo;
    })
    .catch(err => {
      console.error("فشل تسجيل الدخول:", err);
    });
  </script>
</head>
<body>
  <div id="gameContainer">
    <canvas id="gameCanvas" width="360" height="540"></canvas>
    <div id="scoreBoard">
      <p>النقاط: <span id="score">0</span></p>
    </div>
  </div>
  <script src="play.js"></script>
</body>
</html>